<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KaiGPT & SAFI - Egypt's First AI Assistant | Knowing.AI</title>
    <meta name="description" content="KaiGPT powered by SAFI - Egypt's first AI assistant for the Grand Egyptian Museum opening. Know more. Do more.">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><rect width='64' height='64' fill='%23000'/><circle cx='32' cy='32' r='20' fill='none' stroke='%23fff' stroke-width='3'/></svg>">
    
    <!-- React and Babel -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            -webkit-font-smoothing: antialiased;
        }
        
        #root {
            width: 100%;
            height: 100vh;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Lucide Icons as components
        const Send = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="22" y1="2" x2="11" y2="13"></line>
                <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
            </svg>
        );

        const Languages = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M5 8l6 6"></path>
                <path d="M4 14l6-6 2-3"></path>
                <path d="M2 5h12"></path>
                <path d="M7 2h1"></path>
                <path d="M22 22l-5-10-5 10"></path>
                <path d="M14 18h6"></path>
            </svg>
        );

        const Info = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="16" x2="12" y2="12"></line>
                <line x1="12" y1="8" x2="12.01" y2="8"></line>
            </svg>
        );

        const X = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        );

        const ArrowLeft = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="19" y1="12" x2="5" y2="12"></line>
                <polyline points="12 19 5 12 12 5"></polyline>
            </svg>
        );

        const Sun = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="5"></circle>
                <line x1="12" y1="1" x2="12" y2="3"></line>
                <line x1="12" y1="21" x2="12" y2="23"></line>
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                <line x1="1" y1="12" x2="3" y2="12"></line>
                <line x1="21" y1="12" x2="23" y2="12"></line>
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
            </svg>
        );

        const Moon = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
        );

        // KaiGPT Logo Component
        const KaiGPTLogo = ({ className, color = "#fff" }) => (
            <svg viewBox="0 0 300 200" className={className} style={{ width: '100%', height: '100%' }}>
                <path d="M150,30 C195,30 235,50 260,85 L245,100 C225,70 190,55 150,55 C110,55 75,70 55,100 L40,85 C65,50 105,30 150,30 Z" fill={color}/>
                <path d="M150,170 C105,170 65,150 40,115 L55,100 C75,130 110,145 150,145 C190,145 225,130 245,100 L260,115 C235,150 195,170 150,170 Z" fill={color}/>
                <circle cx="150" cy="100" r="45" fill={color}/>
                <circle cx="150" cy="100" r="20" fill="#000"/>
                <circle cx="210" cy="100" r="12" fill={color}/>
                <circle cx="240" cy="120" r="12" fill={color}/>
                <line x1="150" y1="100" x2="210" y2="100" stroke="#000" strokeWidth="8"/>
                <line x1="210" y1="100" x2="240" y2="120" stroke="#000" strokeWidth="8"/>
            </svg>
        );

        const KaiGPTSAFI = () => {
            const [messages, setMessages] = useState([]);
            const [input, setInput] = useState('');
            const [language, setLanguage] = useState('en');
            const [isDark, setIsDark] = useState(true);
            const [showAbout, setShowAbout] = useState(false);
            const [isTyping, setIsTyping] = useState(false);
            const messagesEndRef = useRef(null);

            const gemDatabase = [
                {
                    id: 1,
                    keywords: ["when", "open", "opening", "date", "متى", "افتتاح"],
                    en: { a: "The official opening date is November 1st, 2025." },
                    ar: { a: "التاريخ الرسمي للافتتاح هو 1 نوفمبر 2025." }
                },
                {
                    id: 2,
                    keywords: ["where", "location", "located", "أين", "موقع"],
                    en: { a: "It is located one mile from the Giza Pyramids, Cairo, Egypt." },
                    ar: { a: "يقع على بعد ميل واحد من أهرامات الجيزة في القاهرة، مصر." }
                },
                {
                    id: 3,
                    keywords: ["size", "large", "area", "مساحة", "حجم"],
                    en: { a: "It covers approximately 480,000 square meters and is the largest museum dedicated to a single civilization." },
                    ar: { a: "يغطي حوالي 480,000 متر مربع وهو أكبر متحف مخصص لحضارة واحدة." }
                },
                {
                    id: 4,
                    keywords: ["treasures", "tutankhamun", "artifacts", "كنوز", "توت"],
                    en: { a: "It houses over 100,000 ancient artifacts, including the complete collection of King Tutankhamun's treasures displayed together for the first time." },
                    ar: { a: "يضم أكثر من 100,000 قطعة أثرية قديمة، بما في ذلك مجموعة كنوز توت عنخ آمون كاملة معروضة معاً لأول مرة." }
                }
            ];

            useEffect(() => {
                const welcomeMsg = language === 'en' 
                    ? "Hello! I'm SAFI, Egypt's first AI assistant. Ask me anything about the Grand Egyptian Museum! 🏛️✨"
                    : "أهلاً! أنا صافي، أول مساعد ذكاء اصطناعي مصري. اسألني عن المتحف المصري الكبير! 🏛️✨";
                
                setMessages([{ role: 'assistant', content: welcomeMsg }]);
            }, [language]);

            useEffect(() => {
                messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
            }, [messages]);

            const findBestMatch = (query) => {
                const lowerQuery = query.toLowerCase();
                for (const item of gemDatabase) {
                    if (item.keywords.some(keyword => lowerQuery.includes(keyword.toLowerCase()))) {
                        return language === 'en' ? item.en.a : item.ar.a;
                    }
                }
                return language === 'en'
                    ? "I'd be happy to help! Could you please rephrase your question about the Grand Egyptian Museum?"
                    : "يسعدني المساعدة! هل يمكنك إعادة صياغة سؤالك عن المتحف المصري الكبير؟";
            };

            const handleSend = () => {
                if (!input.trim()) return;
                setMessages(prev => [...prev, { role: 'user', content: input }]);
                setInput('');
                setIsTyping(true);

                setTimeout(() => {
                    const response = findBestMatch(input);
                    setMessages(prev => [...prev, { role: 'assistant', content: response }]);
                    setIsTyping(false);
                }, 1200);
            };

            const styles = {
                container: {
                    display: 'flex',
                    flexDirection: 'column',
                    height: '100vh',
                    background: isDark ? '#000' : '#fff',
                    transition: 'all 0.5s'
                },
                header: {
                    background: isDark ? '#000' : '#fff',
                    borderBottom: `1px solid ${isDark ? 'rgba(255,255,255,0.1)' : 'rgba(0,0,0,0.1)'}`,
                    padding: '16px 24px'
                },
                headerContent: {
                    maxWidth: '1200px',
                    margin: '0 auto',
                    display: 'flex',
                    justifyContent: 'space-between',
                    alignItems: 'center'
                },
                logoSection: {
                    display: 'flex',
                    alignItems: 'center',
                    gap: '16px'
                },
                backBtn: {
                    padding: '12px',
                    borderRadius: '16px',
                    background: isDark ? 'rgba(255,255,255,0.05)' : 'rgba(0,0,0,0.05)',
                    border: 'none',
                    color: isDark ? '#fff' : '#000',
                    cursor: 'pointer',
                    transition: 'all 0.3s'
                },
                logoBox: {
                    padding: '12px',
                    borderRadius: '16px',
                    background: isDark ? '#fff' : '#000',
                    width: '48px',
                    height: '48px',
                    position: 'relative'
                },
                pulse: {
                    position: 'absolute',
                    top: '-2px',
                    right: '-2px',
                    width: '12px',
                    height: '12px',
                    background: '#22c55e',
                    borderRadius: '50%',
                    animation: 'pulse 2s infinite'
                },
                title: {
                    fontSize: '24px',
                    fontWeight: '700',
                    color: isDark ? '#fff' : '#000'
                },
                subtitle: {
                    fontSize: '14px',
                    color: isDark ? '#999' : '#666'
                },
                controls: {
                    display: 'flex',
                    gap: '8px'
                },
                controlBtn: {
                    padding: '12px',
                    borderRadius: '12px',
                    background: isDark ? 'rgba(255,255,255,0.05)' : 'rgba(0,0,0,0.05)',
                    border: 'none',
                    color: isDark ? '#fff' : '#000',
                    cursor: 'pointer',
                    transition: 'all 0.3s',
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'center'
                },
                messagesContainer: {
                    flex: 1,
                    overflowY: 'auto',
                    padding: '24px',
                    display: 'flex',
                    flexDirection: 'column',
                    gap: '24px'
                },
                messageWrapper: {
                    display: 'flex',
                    gap: '16px',
                    maxWidth: '85%',
                    animation: 'slideUp 0.4s ease-out'
                },
                userMessage: {
                    marginLeft: 'auto',
                    flexDirection: 'row-reverse'
                },
                avatar: {
                    width: '44px',
                    height: '44px',
                    borderRadius: '50%',
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'center',
                    flexShrink: 0
                },
                messageContent: {
                    padding: '16px 20px',
                    borderRadius: '24px',
                    fontSize: '15px',
                    lineHeight: '1.7'
                },
                inputSection: {
                    padding: '24px',
                    background: isDark ? '#000' : '#fff',
                    borderTop: `1px solid ${isDark ? 'rgba(255,255,255,0.1)' : 'rgba(0,0,0,0.1)'}`
                },
                inputContainer: {
                    maxWidth: '900px',
                    margin: '0 auto',
                    display: 'flex',
                    gap: '12px',
                    alignItems: 'center',
                    background: isDark ? 'rgba(255,255,255,0.05)' : 'rgba(0,0,0,0.05)',
                    border: `2px solid ${isDark ? 'rgba(255,255,255,0.1)' : 'rgba(0,0,0,0.1)'}`,
                    borderRadius: '16px',
                    padding: '12px 16px'
                },
                input: {
                    flex: 1,
                    background: 'transparent',
                    border: 'none',
                    color: isDark ? '#fff' : '#000',
                    fontSize: '15px',
                    outline: 'none'
                },
                sendBtn: {
                    width: '44px',
                    height: '44px',
                    background: isDark ? '#fff' : '#000',
                    color: isDark ? '#000' : '#fff',
                    border: 'none',
                    borderRadius: '12px',
                    cursor: 'pointer',
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'center'
                },
                modal: {
                    position: 'fixed',
                    inset: 0,
                    background: 'rgba(0,0,0,0.9)',
                    backdropFilter: 'blur(10px)',
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'center',
                    padding: '16px',
                    zIndex: 1000
                },
                modalContent: {
                    background: isDark ? 'linear-gradient(135deg, #1a1a1a 0%, #000 100%)' : 'linear-gradient(135deg, #f5f5f5 0%, #fff 100%)',
                    border: `2px solid ${isDark ? 'rgba(255,255,255,0.2)' : 'rgba(0,0,0,0.2)'}`,
                    borderRadius: '24px',
                    padding: '48px',
                    maxWidth: '700px',
                    width: '100%',
                    position: 'relative'
                },
                closeBtn: {
                    position: 'absolute',
                    top: '24px',
                    right: '24px',
                    padding: '8px',
                    background: isDark ? 'rgba(255,255,255,0.1)' : 'rgba(0,0,0,0.1)',
                    border: 'none',
                    borderRadius: '12px',
                    color: isDark ? '#fff' : '#000',
                    cursor: 'pointer'
                },
                modalTitle: {
                    fontSize: '36px',
                    fontWeight: '700',
                    color: isDark ? '#fff' : '#000',
                    marginBottom: '32px'
                },
                section: {
                    marginBottom: '32px',
                    paddingBottom: '32px',
                    borderBottom: `1px solid ${isDark ? '#333' : '#ddd'}`
                },
                sectionTitle: {
                    fontSize: '18px',
                    fontWeight: '700',
                    color: isDark ? '#fff' : '#000',
                    marginBottom: '16px',
                    textTransform: 'uppercase'
                },
                sectionText: {
                    fontSize: '16px',
                    lineHeight: '1.8',
                    color: isDark ? '#ccc' : '#333'
                },
                footer: {
                    textAlign: 'center',
                    fontSize: '13px',
                    color: isDark ? '#666' : '#999',
                    marginTop: '16px'
                }
            };

            return (
                <div style={styles.container}>
                    <style>{`
                        @keyframes pulse {
                            0%, 100% { opacity: 1; }
                            50% { opacity: 0.5; }
                        }
                        @keyframes slideUp {
                            from { opacity: 0; transform: translateY(20px); }
                            to { opacity: 1; transform: translateY(0); }
                        }
                    `}</style>

                    <header style={styles.header}>
                        <div style={styles.headerContent}>
                            <div style={styles.logoSection}>
                                <button style={styles.backBtn} onClick={() => window.location.href = 'https://knowing-ai.netlify.app'}>
                                    <ArrowLeft />
                                </button>
                                <div style={styles.logoBox}>
                                    <KaiGPTLogo color={isDark ? '#000' : '#fff'} />
                                    <div style={styles.pulse}></div>
                                </div>
                                <div>
                                    <div style={styles.title}>KaiGPT & SAFI</div>
                                    <div style={styles.subtitle}>Know More. Do More.</div>
                                </div>
                            </div>
                            <div style={styles.controls}>
                                <button style={styles.controlBtn} onClick={() => setIsDark(!isDark)}>
                                    {isDark ? <Sun /> : <Moon />}
                                </button>
                                <button style={styles.controlBtn} onClick={() => setShowAbout(true)}>
                                    <Info />
                                </button>
                                <button style={styles.controlBtn} onClick={() => setLanguage(language === 'en' ? 'ar' : 'en')}>
                                    <Languages />
                                </button>
                            </div>
                        </div>
                    </header>

                    {showAbout && (
                        <div style={styles.modal} onClick={() => setShowAbout(false)}>
                            <div style={styles.modalContent} onClick={e => e.stopPropagation()}>
                                <button style={styles.closeBtn} onClick={() => setShowAbout(false)}>
                                    <X />
                                </button>
                                <div style={{ ...styles.logoBox, display: 'inline-flex', marginBottom: '24px' }}>
                                    <KaiGPTLogo color={isDark ? '#000' : '#fff'} />
                                </div>
                                <h2 style={styles.modalTitle}>About SAFI / عن صافي</h2>
                                <div style={styles.section}>
                                    <h3 style={styles.sectionTitle}>English</h3>
                                    <p style={styles.sectionText}>
                                        SAFI is Egypt's first national AI model, created by <strong>Knowing.AI</strong> to deliver intelligent, human-like interactions in Arabic and English.
                                    </p>
                                    <p style={{...styles.sectionText, marginTop: '16px'}}>
                                        She blends Egypt's heritage with advanced technology — built for <strong>clarity</strong>, <strong>trust</strong>, and <strong>knowledge</strong>.
                                    </p>
                                </div>
                                <div style={styles.section} dir="rtl">
                                    <h3 style={styles.sectionTitle}>العربية</h3>
                                    <p style={styles.sectionText}>
                                        صافي هي أول نموذج ذكاء اصطناعي وطني في مصر، من تطوير <strong>Knowing.AI</strong> لتقدّم تفاعل ذكي وطبيعي بالعربي والإنجليزي.
                                    </p>
                                    <p style={{...styles.sectionText, marginTop: '16px'}}>
                                        بتجمع بين روح مصر العريقة والتقنيات الحديثة — معمولة علشان <strong>الوضوح</strong>، و<strong>الثقة</strong>، و<strong>المعرفة</strong>.
                                    </p>
                                </div>
                                <div style={styles.footer}>
                                    Powered by Knowing.AI • مدعوم من Knowing.AI
                                </div>
                            </div>
                        </div>
                    )}

                    <div style={styles.messagesContainer}>
                        {messages.map((msg, i) => (
                            <div key={i} style={{...styles.messageWrapper, ...(msg.role === 'user' && styles.userMessage)}}>
                                <div style={{
                                    ...styles.avatar,
                                    background: msg.role === 'user' ? (isDark ? '#fff' : '#000') : 'rgba(255,255,255,0.1)',
                                    color: msg.role === 'user' ? (isDark ? '#000' : '#fff') : '#fff',
                                    border: msg.role === 'assistant' ? '2px solid #fff' : 'none'
                                }}>
                                    {msg.role === 'user' ? 'You' : '👸'}
                                </div>
                                <div style={{
                                    ...styles.messageContent,
                                    background: msg.role === 'user' ? (isDark ? '#fff' : '#000') : (isDark ? 'rgba(255,255,255,0.05)' : 'rgba(0,0,0,0.05)'),
                                    color: msg.role === 'user' ? (isDark ? '#000' : '#fff') : (isDark ? '#fff' : '#000'),
                                    border: msg.role === 'assistant' ? `1px solid ${isDark ? 'rgba(255,255,255,0.1)' : 'rgba(0,0,0,0.1)'}` : 'none'
                                }}>
                                    {msg.content}
                                </div>
                            </div>
                        ))}
                        {isTyping && (
                            <div style={styles.messageWrapper}>
                                <div style={{...styles.avatar, background: 'rgba(255,255,255,0.1)', border: '2px solid #fff'}}>
                                    👸
                                </div>
                                <div style={{...styles.messageContent, background: isDark ? 'rgba(255,255,255,0.05)' : 'rgba(0,0,0,0.05)', display: 'flex', gap: '6px'}}>
                                    <div style={{width: '10px', height: '10px', background: '#999', borderRadius: '50%', animation: 'bounce 1.4s infinite'}}></div>
                                    <div style={{width: '10px', height: '10px', background: '#999', borderRadius: '50%', animation: 'bounce 1.4s infinite 0.2s'}}></div>
                                    <div style={{width: '10px', height: '10px', background: '#999', borderRadius: '50%', animation: 'bounce 1.4s infinite 0.4s'}}></div>
                                </div>
                            </div>
                        )}
                        <div ref={messagesEndRef} />
                    </div>

                    <div style={styles.inputSection}>
                        <div style={styles.inputContainer}>
                            <input 
                                style={styles.input}
                                value={input}
                                onChange={e => setInput(e.target.value)}
                                onKeyPress={e => e.key === 'Enter' && handleSend()}
                                placeholder={language === 'en' ? 'Ask about the Grand Egyptian Museum...' : 'اسأل عن المتحف المصري الكبير...'}
                                dir={language === 'ar' ? 'rtl' : 'ltr'}
                            />
                            <button style={styles.sendBtn} onClick={handleSend} disabled={!input.trim()}>
                                <Send />
                            </button>
                        </div>
                        <div style={{...styles.footer, marginTop: '16px'}}>
                            {language === 'en' 
                                ? 'SAFI - Egypt\'s First AI Assistant | Powered by Knowing.AI'
                                : 'صافي - أول مساعد ذكاء اصطناعي مصري | بدعم من Knowing.AI'
                            }
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<KaiGPTSAFI />, document.getElementById('root'));
    </script>
</body>
</html>
